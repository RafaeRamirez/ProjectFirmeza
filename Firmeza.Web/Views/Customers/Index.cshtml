@model IEnumerable<Firmeza.Web.Models.Customer>
@{ ViewData["Title"]="Clientes"; }

@if (TempData["CustomersMessage"] is string ok && !string.IsNullOrWhiteSpace(ok))
{
    <div class="alert alert-success">@ok</div>
}
@if (TempData["CustomersError"] is string err && !string.IsNullOrWhiteSpace(err))
{
    <div class="alert alert-danger">@err</div>
}
@if (TempData["CustomersResetLink"] is string link && !string.IsNullOrWhiteSpace(link))
{
    <div class="alert alert-info">
        Enlace de restablecimiento (solo visible en desarrollo):
        <a href="@link">@link</a>
    </div>
}

<div class="d-flex flex-wrap justify-content-between align-items-start gap-3 mb-3">
<form method="get" class="d-flex gap-2 flex-wrap">
    <input class="form-control" type="search" name="q" placeholder="Buscar..." value="@ViewContext.HttpContext.Request.Query["q"]"/>
    <button class="btn btn-outline-secondary">Buscar</button>
</form>
<div class="d-flex gap-2 flex-wrap">
    <form asp-action="Import" method="post" enctype="multipart/form-data" class="d-flex gap-2 flex-wrap">
        @Html.AntiForgeryToken()
        <input class="form-control form-control-sm" type="file" name="file" accept=".xlsx,.xls" required />
        <button class="btn btn-outline-primary btn-sm" type="submit">Importar Excel</button>
    </form>
    <a class="btn btn-outline-primary" asp-action="Export">Exportar Excel</a>
    <a class="btn btn-success" asp-action="Create">Crear</a>
</div>
</div>
<table class="table table-striped"><thead><tr><th>Nombre</th><th>Correo</th><th>Tel√©fono</th><th></th></tr></thead><tbody>
@foreach(var c in Model){<tr><td>@c.FullName</td><td>@c.Email</td><td>@c.Phone</td><td class="text-end d-flex gap-2 justify-content-end flex-wrap">
<a class="btn btn-sm btn-outline-secondary" asp-action="Edit" asp-route-id="@c.Id">Editar</a>
<a class="btn btn-sm btn-outline-danger" asp-action="Delete" asp-route-id="@c.Id">Eliminar</a>
</td></tr>} </tbody></table>
